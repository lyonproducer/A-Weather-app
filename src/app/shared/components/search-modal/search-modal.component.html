

<ion-header mode="md" class="ion-padding">
  <ion-toolbar mode="md">
    <ion-title>Search City</ion-title>
  </ion-toolbar>

  <ion-toolbar mode="md">
    <ion-searchbar #searchInput animated="true" placeholder="Type city name or postal code" show-clear-button="focus" [debounce]="1000" (ionInput)="onHandleSearch(searchInput)"></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  @if(results.length === 0 && isLoading === false ){
    <p>There are not cities availables, lets write to search.</p>
  }

  @if(results.length === 0 && isLoading === true){
    <div class="d-flex ion-justify-content-center">
      <ion-spinner></ion-spinner>
    </div>
  }

  @for (result of results; track result) {
    <ion-item (click)="onSelectOption(result)">
      <ion-label slot="start">
        <h3>
          {{ result.name }}
        </h3>
        <p>
          {{ result.country }}
        </p>
      </ion-label>
      <ion-checkbox slot="end" [checked]="resultSelected === result" #checkBox (ionChange)="onSelectOption(result)"></ion-checkbox>
    </ion-item>
    <hr>
  }

</ion-content>

<ion-footer>
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-button color="primary" expand="block" fill="solid" shape="round" (click)="dismiss(resultSelected)">Select</ion-button>
      </ion-col>

      <ion-col size="12">
        <ion-button color="medium" expand="block" fill="solid" 
        (click)="dismiss()" shape="round">Back</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>
